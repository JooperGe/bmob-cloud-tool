var model = {}

var Bmob = model.Bmob = require("./sdk/bmob.js").Bmob;

var __Request = model.Request = function (route, table, objectId, method, params, callback) {
//        Bmob._arrayEach(["__type", "className"],
//            function(key) { delete json[key]; });

    Bmob._request(route, table, objectId, method, params)
        .then(function (response) {
            return JSON.stringify(response);
        })
        ._thenRunCallbacks({
            success: function (results) {
                callback(null, results);
            },
            error: function (error) {
                callback(error, null);
            }
        }
    );

}

model.Request = function (table, objectId, method, params, callback) {
    __Request("classes", table, objectId, method, params, callback);
}

module.exports = model;
