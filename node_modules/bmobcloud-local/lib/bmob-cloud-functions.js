var __Request = require("./../bmob-cloud-common").Request;
var assert = require("assert");

module.exports = (function () {
    var model = {};

    /**
     在云代码中可以调用本app的其它云代码，示例代码如下：

     function onRequest(request, response, modules) {
     var functions = modules.oFunctions;

     functions.run({
     "name": "test",
     "data":{"content":"你好","address":"guangzhou"}
     },function(err,data){
     //回调函数
     });
     }
     在上面的例子中，name是云代码的函数名，data中是传递的参数

     如果不需要传递任何参数，可以用下面的实例代码：

     function onRequest(request, response, modules) {
     var functions = modules.oFunctions;

     functions.run({
     "name": "test"
     },function(err,data){
     //回调函数
     });
     }
     */
    model.run = function (request, callback) {
        assert.ifError(request.name == null);

        __Request("functions", request.name, null, 'POST', request.data, callback);
    }

    return model;
})();